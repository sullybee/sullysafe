<!DOCTYPE html>
<html>
  <head>

    <title>Sullybee Track</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCKZzkk6cm85bFG_b7vnJeJJNxWsHBlBD8&callback=initMap&libraries=&v=weekly"
      defer
    ></script>
    <style type="text/css">
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>

  </head>
  <body>
    	<div id="map"></div>
  	<script src="/__/firebase/7.17.0/firebase-app.js"></script>
  	<script src="/__/firebase/7.17.0/firebase-analytics.js"></script>
  	<script src="/__/firebase/7.17.0/firebase-auth.js"></script>
  	<script src="/__/firebase/7.17.0/firebase-database.js"></script>
 	<script src="/__/firebase/7.17.0/firebase-firestore.js"></script>
    	<script>
		var config = {
  			apiKey: "AIzaSyCKZzkk6cm85bFG_b7vnJeJJNxWsHBlBD8",
  			authDomain: "sullysafe-c1a9b.firebaseapp.com",
  			databaseURL: "https://sullysafe-c1a9b.firebaseio.com",
  			projectId: "sullysafe-c1a9b",
  			storageBucket: "sullysafe-c1a9b.appspot.com",
  			messagingSenderId: "242225606129",
  			appId: "1:242225606129:web:9dc258dc1f1beb234a2850",
  			measurementId: "G-1P7PQ9B43C"
			};
		var app = firebase.initializeApp(config);

		var db = firebase.firestore(app);
		
		//function initMap() {console.log("ok");}    
  		
  		var map;
  		function initMap() {
    			map = new google.maps.Map(document.getElementById('map'), {
      			center: {lat:17, lng: 80},
      			zoom: 5
    			});
  		}

		const mapDiv = document.getElementById("map");

		//var data = db.collection('data').doc('datafile').get();
		//console.log(data) 

		db.collection("data").doc("datafile")
    		.onSnapshot(function(doc) {
        		console.log("Current data: ", doc.data());
			var la = doc.data().geo.oa;
			var lo = doc.data().geo.ha; 
  			const map = new google.maps.Map(mapDiv, {
    			zoom: 8,
    			center: new google.maps.LatLng(la,lo)}); 
    		 });
    </script>
  </body>
</html>
